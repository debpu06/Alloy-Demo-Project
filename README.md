# Alloy-Demo-Project - Documentation View
Full details of the implementation can be found [here](https://davidboland.site/blog/episerver-editor-documentation-view/)

## Usage
To add it to your project, put the following projects into your solution and reference them in your web project:
* Documentation.Plugin
* Documentation.Plugin.Core
* Documentation.Plugin.Github

From there, you need to add the view [__~/Views/EditorViewDocumentation/Index.cshtml__](https://github.com/debpu06/Alloy-Demo-Project/blob/feature-editor-documentation-view/Alloy%20Demo%20Site/Views/EditorViewDocumentation/Index.cshtml).

 Next, add the necessary ServiceConfigurationContext calls:
 ``` csharp
context.InitializeDocumentationPlugin(new GithubConfigurationOptions()
{
    GithubApiToken = ConfigurationManager.AppSettings["GithubApiKey"],
    GithubRepositoryName = ConfigurationManager.AppSettings["GithubRepositoryName"],
    GithubRepositoryOwner = ConfigurationManager.AppSettings["GithubRepositoryOwner"],
    GithubDocumentationFolder = ConfigurationManager.AppSettings["GithubDocumentationFolder"],
    GithubBranch = ConfigurationManager.AppSettings["GithubBranch"],
    GithubApiUrl = ConfigurationManager.AppSettings["GithubApiUrl"]
});
```
as well as the listed settings to your appSettings. 'GithubDocumentationFolder' is the repository path your markdown documentation files. In my example, my documentation folder is in the repository root. You can see my settings below.

``` xml
  <!-- Github Api key can be generated by going to 
  Settings > Developer Settings > Personal Access Tokens in Github  -->
  <add key="GithubApiKey" value="***************************"/>

  <!-- Github repo owner. Can be the user or group owner -->
  <add key="GithubRepositoryOwner" value="debpu06"/>

  <!-- Github Repository Name -->
  <add key="GithubRepositoryName" value="Alloy-Demo-Project"/>

  <!-- Relative path to folder that contains documentation. This 
  example shows that the 'Documentation' folder is in the repository root -->
  <add key="GithubDocumentationFolder" value="Documentation" />

  <!-- specific branch of the documentation to use -->
  <add key="GithubBranch" value="feature-editor-documentation-view" />

  <!-- Github api url -->
  <add key="GithubApiUrl" value="https://api.github.com" />
```

Lastly, all you need is to implement the [__Documentation.Plugin.Interfaces.IDocumented__](https://github.com/debpu06/Alloy-Demo-Project/blob/feature-editor-documentation-view/Documentation.Plugin/Interfaces/IDocumented.cs) interface on your page types. In my example, I added it to the StartPage. It falls back to "StartPage.md" but can be set on a per instance basis.
``` csharp
[ContentType(
        GUID = "19671657-B684-4D95-A61F-8DD4FE60D559",
        GroupName = Global.GroupNames.Specialized)]
    [SiteImageUrl]
    public class StartPage : SitePageData, IDocumented
    {
        [Display(
            Name = "Documentation Reference",
            GroupName = SystemTabNames.Content,
            Order = 310)]
        [CultureSpecific]
        public virtual string DocumentationReference
        {
            get { return this.GetPropertyValue(page => page.DocumentationReference) ?? "StartPage.md"; }
            set { this.SetPropertyValue(page => page.DocumentationReference, value); }
        }
```
You can then populate the property in episerver with the name of the markdown documentation file.
